#N canvas 629 63 597 306 10;
#X declare -path else;
#X msg 113 129 500 1000 1500 2000;
#X msg 164 166 0.9 0.8 0.4 0.3;
#X msg 96 102 100 200 300 400;
#X obj 113 190 roughness;
#X obj 113 225 print;
#X text 83 39 Get the overall roughness of a spectrum \, defined by
a frequency and amplitude list, f 42;
#X text 199 101 <= freq;
#X text 266 165 <= amp;
#N canvas 386 23 1018 674 roughness-curve-example 0;
#X obj 465 25 cnv 15 511 598 empty empty empty 20 12 0 14 -228856 -66577
0;
#N canvas 0 22 1387 856 (subpatch) 0;
#X array Curva 1251 float 0;
#X coords 0 25.1524 1251 2.85214 512 600 1;
#X restore 464 24 graph;
#X msg 137 266 500 1000 1500 2000;
#X msg 301 260 phonsteps \$1;
#X floatatom 301 241 5 4 24 0 - - -;
#X msg 316 300 loudness \$1;
#X obj 316 282 hradio 15 1 0 5 empty empty empty 0 -8 0 10 -262144
-1 -1 0;
#X msg 340 381 curve \$1;
#X obj 330 322 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 340 363 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 330 340 weight \$1;
#X msg 150 298 0.9 0.8 0.4 0.3;
#X msg 128 242 100 200 300 400;
#X obj 349 403 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 349 421 masking \$1;
#X obj 363 67 setdsp~ 1;
#X msg 88 564 curve 1 \, loudness 0 \, weight 0;
#N canvas 359 210 428 325 Curve 0;
#X obj 126 49 inlet;
#X obj 231 49 inlet;
#N canvas 229 23 1039 714 Duplicate/Curve 0;
#X obj 560 535 list append;
#X obj 231 190 until;
#X obj 695 537 list append;
#X obj 204 72 inlet;
#X obj 722 72 inlet;
#X text 126 70 frequencies;
#X text 653 72 amplitudes;
#X obj 480 228 s neg;
#X obj 560 581 outlet;
#X obj 695 580 outlet;
#X obj 258 584 outlet;
#X obj 695 481 trigger l l;
#X obj 560 389 trigger bang float bang;
#X text 524 607 Lista de Frequencia Original;
#X text 496 627 Mais Lista de Frequencia de Intervalos;
#X text 750 581 Lista Duplicada de Amplitudes;
#X text 484 97 \$2: interval start in Semitones;
#X text 68 141 \$1: Range in Midicent;
#X msg 273 189 0;
#X obj 258 216 f;
#X text 289 240 \$3: Step;
#X text 642 143 \$3: Step;
#X text 122 268 Ínidices/Intervalos;
#N canvas 200 373 341 370 interval-in-ratios 0;
#X obj 120 160 mtof;
#X msg 120 132 0;
#X obj 72 160 mtof;
#X obj 82 200 /;
#X obj 120 104 loadbang;
#X obj 135 285 outlet;
#X obj 72 55 inlet;
#X text 113 303 interval in freq;
#X obj 135 259 / 1;
#X obj 187 59 inlet;
#X text 216 197 cents to ratio;
#X obj 187 217 expr pow(2 \, $f1/1200);
#X text 113 214 Ratio;
#X text 37 27 Índices/Intervalos;
#X text 193 33 neg;
#X connect 0 0 3 1;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 3 0 8 0;
#X connect 4 0 1 0;
#X connect 6 0 2 0;
#X connect 8 0 5 0;
#X connect 9 0 11 0;
#X connect 11 0 8 1;
#X restore 560 344 pd interval-in-ratios;
#X text 567 367 Ratios;
#X text 742 454 Amp;
#X obj 204 116 trigger bang bang list bang;
#X obj 258 268 trigger float float;
#N canvas 205 316 281 180 waveform 0;
#X obj 41 35 r sampleAmpList;
#X obj 125 61 r waveform;
#X obj 101 100 outlet;
#X connect 0 0 2 0;
#X connect 1 0 2 0;
#X restore 738 414 pd waveform;
#X obj 480 120 f 0;
#X obj 480 176 expr $f1 *(-1/ $f2 );
#X obj 480 151 t f b;
#X text 261 296 (Semitons);
#X text 256 613 Semitons;
#X obj 362 156 s bangclear;
#X obj 291 216 + 0.01;
#X obj 597 144 f 0.01;
#X obj 204 142 f 1251;
#X obj 560 455 list;
#X obj 695 457 list;
#X obj 204 168 t b f;
#X obj 191 238 s \$0-done;
#N canvas 760 296 312 319 list-mul 0;
#X obj 84 42 inlet;
#X obj 148 120 regroup 1;
#X obj 148 160 *;
#X obj 166 42 inlet;
#X obj 148 235 list store, f 12;
#X msg 148 195 append \$1;
#X obj 84 82 trigger bang list bang;
#X obj 148 270 outlet;
#X connect 0 0 6 0;
#X connect 1 0 2 0;
#X connect 2 0 5 0;
#X connect 3 0 2 1;
#X connect 4 0 7 0;
#X connect 5 0 4 0;
#X connect 6 0 4 0;
#X connect 6 1 1 0;
#X connect 6 2 4 1;
#X restore 587 506 pd list-mul;
#X obj 560 482 t l l;
#X connect 0 0 8 0;
#X connect 1 0 19 0;
#X connect 2 0 9 0;
#X connect 3 0 26 0;
#X connect 4 0 39 1;
#X connect 11 0 2 0;
#X connect 11 1 2 1;
#X connect 12 0 38 0;
#X connect 12 1 42 1;
#X connect 12 2 39 0;
#X connect 18 0 19 1;
#X connect 19 0 27 0;
#X connect 19 0 35 0;
#X connect 23 0 12 0;
#X connect 26 0 37 0;
#X connect 26 1 18 0;
#X connect 26 2 38 1;
#X connect 26 3 29 0;
#X connect 26 3 34 0;
#X connect 27 0 10 0;
#X connect 27 1 23 0;
#X connect 28 0 39 1;
#X connect 29 0 31 0;
#X connect 30 0 7 0;
#X connect 30 0 23 1;
#X connect 31 0 30 0;
#X connect 31 1 36 0;
#X connect 35 0 19 1;
#X connect 36 0 30 1;
#X connect 37 0 40 0;
#X connect 38 0 43 0;
#X connect 39 0 11 0;
#X connect 40 0 41 0;
#X connect 40 1 1 0;
#X connect 42 0 0 1;
#X connect 43 0 0 0;
#X connect 43 1 42 0;
#X restore 126 98 pd Duplicate/Curve;
#X obj 243 255 outlet;
#X obj 287 255 outlet;
#N canvas 176 23 546 582 Peaks-List 0;
#X obj 198 242 -;
#X obj 171 119 pack float float;
#X obj 264 56 inlet;
#X obj 171 204 t f f;
#X obj 225 316 change;
#X text 229 242 diferença de roughness em relação ao anterior;
#X obj 171 145 swap;
#X text 306 55 Roughness (R);
#X text 115 52 Semitons;
#X text 111 98 Cents (C);
#X obj 139 519 outlet;
#X msg 230 214 0;
#X obj 225 345 sel -1 1;
#X obj 231 193 r bangclear;
#X obj 198 290 sel 0;
#X obj 171 97 i;
#X obj 171 53 inlet;
#X obj 171 75 * 100;
#X obj 139 478 list store;
#X msg 225 399 append \$1;
#X text 80 121 Cents - Ratio;
#X text 190 521 Scale;
#X obj 196 454 r bangclear;
#X obj 198 265 expr $f1/abs($f1);
#X obj 225 374 v cents;
#X obj 192 169 v cents;
#X obj 139 402 r \$0-done;
#X connect 0 0 23 0;
#X connect 1 0 6 0;
#X connect 2 0 1 1;
#X connect 3 0 0 1;
#X connect 3 1 0 0;
#X connect 4 0 12 0;
#X connect 6 0 3 0;
#X connect 6 1 25 0;
#X connect 11 0 0 1;
#X connect 12 0 24 0;
#X connect 12 1 24 0;
#X connect 13 0 11 0;
#X connect 14 1 4 0;
#X connect 15 0 1 0;
#X connect 16 0 17 0;
#X connect 17 0 15 0;
#X connect 18 0 10 0;
#X connect 19 0 18 0;
#X connect 22 0 18 1;
#X connect 23 0 14 0;
#X connect 24 0 19 0;
#X connect 26 0 18 0;
#X restore 126 197 pd Peaks-List;
#X text 141 177 Roughness;
#X text 64 98 Semitons;
#X text 68 172 Semitons;
#X obj 126 255 outlet;
#X obj 290 49 inlet;
#X connect 0 0 2 0;
#X connect 1 0 2 1;
#X connect 2 0 5 0;
#X connect 2 1 3 0;
#X connect 2 2 4 0;
#X connect 5 0 9 0;
#X connect 10 0 5 1;
#X restore 128 342 pd Curve;
#N canvas 888 23 523 381 notes 0;
#X text 70 36 phonstep (defaut is 20 \, reasonalbe is from 10 to 25)
;
#X text 88 227 Clarence's Model: curve 0 \, loudness 2 \, weight 1
;
#X text 88 244 Vassilakis Model: curve 1 \, loudness 0 \, weight 0
;
#X text 70 172 curve: 0 = Parncutt (default) \, 1 = Sethares;
#X text 70 152 weight: 0 (vassilakis/default) \, 1 (log mean used by
Clarence), f 61;
#X text 89 279 Default \, no masking;
#X text 74 61 loudness mode:;
#X text 98 81 0 - linear amplitude \; 1 - dbtorms(dB-LTh) \; 2 - dbtorms(Phon)
\; 3 - Phon \; 4 - Sones (default), f 68;
#X text 88 210 Porres' model (default): Curve 0 \, loudness 2 \, weight
0;
#X restore 252 72 pd notes;
#X text 260 539 Barlow's;
#X text 274 565 Vassilakis';
#N canvas 293 272 489 363 set-table 0;
#X obj 85 27 inlet;
#X obj 374 107 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 374 158 print;
#X msg 366 212 const 0;
#X obj 366 249 s Curva;
#X obj 191 157 array set Curva;
#X obj 374 132 array get Curva;
#X obj 244 107 list length;
#X obj 244 130 array size Curva;
#X obj 191 190 array max Curva;
#X obj 85 190 array min Curva;
#X obj 85 82 trigger bang bang list list;
#X msg 170 285 \; Curva bounds 0 \$2 1251 \$1;
#X floatatom 149 222 5 0 0 0 - - -;
#X floatatom 191 222 5 0 0 0 - - -;
#X obj 170 247 pack;
#X obj 212 254 initmess 1 0;
#X obj 85 54 regroup 1251;
#X connect 0 0 17 0;
#X connect 1 0 6 0;
#X connect 3 0 4 0;
#X connect 6 0 2 0;
#X connect 7 0 8 0;
#X connect 9 0 14 0;
#X connect 10 0 13 0;
#X connect 11 0 10 0;
#X connect 11 1 9 0;
#X connect 11 2 5 0;
#X connect 11 3 7 0;
#X connect 13 0 15 0;
#X connect 14 0 15 1;
#X connect 15 0 12 0;
#X connect 16 0 12 0;
#X connect 17 0 11 0;
#X restore 205 406 pd set-table;
#X obj 128 451 print Peak/Through;
#X text 421 626 Cents;
#X text 459 627 0;
#X text 493 627 100;
#X text 534 627 200;
#X text 575 627 300;
#X text 616 627 400;
#X text 657 627 500;
#X text 698 627 600;
#X text 739 627 700;
#X text 780 627 800;
#X text 821 627 900;
#X text 859 627 1000;
#X text 900 627 1100;
#X text 941 627 1200;
#X obj 316 448 s \$0-roughness;
#X obj 74 596 s \$0-roughness;
#X obj 205 334 r \$0-roughness;
#X msg 74 539 curve 0 \, loudness 4 \, weight 1;
#X msg 55 514 curve 0 \, loudness 4 \, weight 0;
#X obj 205 371 roughness;
#X text 239 513 Porres' model (default);
#X obj 70 53 declare -path else;
#X text 72 14 this example depends on the else library;
#N canvas 451 23 280 264 freq-amps 0;
#X obj 120 52 inlet;
#X obj 167 190 outlet;
#X obj 99 189 outlet;
#X obj 68 119 t b b;
#X obj 68 87 bng 15 250 50 0 empty \$0-Go! empty 17 7 0 10 -228856
-1 -1;
#X obj 99 155 list;
#X obj 167 154 list;
#X obj 68 52 inlet;
#N canvas 240 57 348 317 get-lists 0;
#X obj 205 86 sel 0;
#X obj 94 219 list store;
#X msg 94 183 append \$1;
#X obj 178 219 list store;
#X msg 178 183 append \$1;
#X obj 205 114 t b b b;
#X msg 95 103 \$2;
#X msg 142 103 \$3;
#X obj 142 59 trigger l f;
#X obj 142 35 inlet;
#X obj 178 250 outlet;
#X obj 94 250 outlet;
#X connect 0 0 5 0;
#X connect 1 0 11 0;
#X connect 2 0 1 0;
#X connect 3 0 10 0;
#X connect 4 0 3 0;
#X connect 5 0 1 1;
#X connect 5 0 3 1;
#X connect 5 1 1 0;
#X connect 5 2 3 0;
#X connect 6 0 2 0;
#X connect 7 0 4 0;
#X connect 8 0 7 0;
#X connect 8 0 6 0;
#X connect 8 1 0 0;
#X connect 9 0 8 0;
#X restore 120 88 pd get-lists;
#X connect 0 0 8 0;
#X connect 3 0 5 0;
#X connect 3 1 6 0;
#X connect 4 0 3 0;
#X connect 5 0 2 0;
#X connect 6 0 1 0;
#X connect 7 0 4 0;
#X connect 8 0 5 1;
#X connect 8 1 6 1;
#X restore 34 285 pd freq-amps;
#X floatatom 103 111 5 0 0 0 - - -;
#X floatatom 177 141 5 4 50 0 - - -;
#X msg 177 164 npeak \$1;
#X obj 103 160 bl.saw~;
#X obj 103 134 sig~ 300;
#X obj 103 203 sigmund~ -npts 2048 -hop 1024 -npeak 10 peaks;
#X obj 34 249 bng 17 250 50 0 empty empty empty 17 7 0 10 -228856 -1
-1;
#X text 28 229 Do it;
#X connect 2 0 17 0;
#X connect 3 0 37 0;
#X connect 4 0 3 0;
#X connect 5 0 37 0;
#X connect 6 0 5 0;
#X connect 7 0 37 0;
#X connect 8 0 10 0;
#X connect 9 0 7 0;
#X connect 10 0 37 0;
#X connect 11 0 17 1;
#X connect 12 0 17 0;
#X connect 13 0 14 0;
#X connect 14 0 37 0;
#X connect 16 0 38 0;
#X connect 17 0 22 0;
#X connect 17 1 42 0;
#X connect 17 2 42 1;
#X connect 39 0 42 0;
#X connect 40 0 38 0;
#X connect 41 0 38 0;
#X connect 42 0 17 2;
#X connect 42 0 21 0;
#X connect 46 0 17 0;
#X connect 46 1 17 1;
#X connect 47 0 51 0;
#X connect 48 0 49 0;
#X connect 49 0 52 0;
#X connect 50 0 52 0;
#X connect 51 0 50 0;
#X connect 52 0 46 1;
#X connect 53 0 46 0;
#X restore 365 172 pd roughness-curve-example;
#N canvas 693 213 522 442 realtime 0;
#X obj 165 199 roughness;
#X floatatom 91 33 5 0 0 0 - - -;
#X obj 91 57 osc~ 1000;
#X obj 165 57 osc~ 1090;
#X floatatom 165 33 5 0 0 0 - - -;
#X obj 165 234 nbx 10 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 1.03217 256;
#X obj 346 199 setdsp~ 1;
#X obj 165 100 *~ 0.5;
#X obj 165 130 sigmund~ -npts 2048 -hop 1024 -npeak 2 peaks;
#N canvas 240 57 348 317 get-lists 0;
#X obj 205 86 sel 0;
#X obj 94 219 list store;
#X msg 94 183 append \$1;
#X obj 178 219 list store;
#X msg 178 183 append \$1;
#X obj 205 114 t b b b;
#X msg 95 103 \$2;
#X msg 142 103 \$3;
#X obj 142 59 trigger l f;
#X obj 142 35 inlet;
#X obj 178 250 outlet;
#X obj 94 250 outlet;
#X connect 0 0 5 0;
#X connect 1 0 11 0;
#X connect 2 0 1 0;
#X connect 3 0 10 0;
#X connect 4 0 3 0;
#X connect 5 0 1 1;
#X connect 5 0 3 1;
#X connect 5 1 1 0;
#X connect 5 2 3 0;
#X connect 6 0 2 0;
#X connect 7 0 4 0;
#X connect 8 0 7 0;
#X connect 8 0 6 0;
#X connect 8 1 0 0;
#X connect 9 0 8 0;
#X restore 165 163 pd get-lists;
#X obj 165 273 vsl 15 128 0 1 0 0 empty empty empty 0 -9 0 10 -228856
-1 -1 12700 1;
#X connect 0 0 5 0;
#X connect 1 0 2 0;
#X connect 2 0 7 0;
#X connect 3 0 7 0;
#X connect 4 0 3 0;
#X connect 5 0 10 0;
#X connect 7 0 8 0;
#X connect 8 0 9 0;
#X connect 9 0 0 0;
#X connect 9 1 0 1;
#X restore 368 141 pd realtime;
#X connect 0 0 3 0;
#X connect 1 0 3 1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
