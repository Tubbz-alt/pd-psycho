#N canvas 600 87 597 306 10;
#X msg 113 129 500 1000 1500 2000;
#X msg 164 166 0.9 0.8 0.4 0.3;
#X msg 96 102 100 200 300 400;
#X obj 113 190 roughness;
#X obj 113 225 print;
#X text 135 38 Get the overall roughness of a spectrum \, defined by
a frequency and amplitude list, f 42;
#X text 199 101 <= freq;
#X text 266 165 <= amp;
#N canvas 320 55 1018 674 roughness-curve-example 1;
#X obj 465 25 cnv 15 511 598 empty empty empty 20 12 0 14 -228856 -66577
0;
#N canvas 0 22 1387 856 (subpatch) 0;
#X array Curva 1251 float 0;
#X coords 0 23.0715 1251 2.59381 512 600 1;
#X restore 464 24 graph;
#X msg 144 355 500 1000 1500 2000;
#X msg 302 346 phonsteps \$1;
#X floatatom 302 327 5 4 24 0 - - -;
#X msg 317 386 loudness \$1;
#X obj 317 368 hradio 15 1 0 5 empty empty empty 0 -8 0 10 -262144
-1 -1 0;
#X msg 341 467 curve \$1;
#X obj 331 408 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 341 449 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 331 426 weight \$1;
#X msg 175 392 0.9 0.8 0.4 0.3;
#X msg 129 328 100 200 300 400;
#X obj 350 489 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 350 507 masking \$1;
#X msg 91 101 curve 1 \, loudness 0 \, weight 0;
#N canvas 359 210 457 332 Curve 1;
#X obj 129 58 inlet;
#X obj 234 58 inlet;
#N canvas 467 23 635 720 Duplicate/Curve 0;
#X obj 369 538 list append;
#X obj 190 193 until;
#X obj 504 540 list append;
#X obj 163 75 inlet;
#X obj 525 75 inlet;
#X text 147 52 frequencies;
#X text 507 52 amplitudes;
#X obj 369 584 outlet;
#X obj 504 583 outlet;
#X obj 217 587 outlet;
#X obj 504 484 trigger l l;
#X obj 369 392 trigger bang float bang;
#X msg 232 192 0;
#X obj 217 219 f;
#X text 376 370 Ratios;
#X obj 163 119 trigger bang bang list bang;
#X obj 321 159 s bangclear;
#X obj 163 145 f 1251;
#X obj 369 458 list;
#X obj 504 460 list;
#X obj 163 171 t b f;
#X obj 150 241 s \$0-done;
#N canvas 692 156 375 353 list-mul 0;
#X obj 84 47 inlet;
#X obj 148 165 *;
#X obj 166 47 inlet;
#X obj 148 240 list store, f 12;
#X msg 148 200 append \$1;
#X obj 84 87 trigger bang list bang;
#X obj 148 275 outlet;
#N canvas 353 233 299 282 drip 0;
#X obj 81 101 until;
#X obj 94 184 list store;
#X obj 107 68 t b b l;
#X obj 81 126 f;
#X obj 119 127 + 1;
#X msg 133 101 0, f 2;
#X msg 80 155 get \$1 1;
#X obj 107 36 inlet;
#X obj 94 214 outlet;
#X connect 0 0 3 0;
#X connect 1 0 8 0;
#X connect 1 1 0 1;
#X connect 2 0 0 0;
#X connect 2 1 5 0;
#X connect 2 2 1 1;
#X connect 3 0 4 0;
#X connect 3 0 6 0;
#X connect 4 0 3 1;
#X connect 5 0 3 1;
#X connect 6 0 1 0;
#X connect 7 0 2 0;
#X restore 148 128 pd drip;
#X connect 0 0 5 0;
#X connect 1 0 4 0;
#X connect 2 0 1 1;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 5 0 3 0;
#X connect 5 1 7 0;
#X connect 5 2 3 1;
#X connect 7 0 1 0;
#X restore 396 509 pd list-mul;
#X obj 369 485 t l l;
#X text 275 219 <= Step;
#X text 449 171 <= Step;
#X text 507 606 Duplicated amplitude list, f 11;
#X text 341 611 Frequency list + shifted frequency list, f 17;
#X obj 417 113 f 0;
#N canvas 523 256 435 304 ratio 0;
#X obj 208 200 outlet;
#X obj 78 69 inlet;
#X text 186 218 interval in freq;
#X obj 222 74 inlet;
#X text 252 112 cents to ratio;
#X obj 223 131 expr pow(2 \, $f1/1200);
#X obj 208 174 /;
#X text 34 134 ratio;
#X text 228 48 interval start;
#X obj 78 130 expr pow(2 \, $f1/1200);
#X text 80 45 cents;
#X connect 1 0 9 0;
#X connect 3 0 5 0;
#X connect 5 0 6 1;
#X connect 6 0 0 0;
#X connect 9 0 6 0;
#X restore 369 347 pd ratio;
#X obj 217 271 t f f;
#X text 49 145 Range in cents =>;
#X obj 250 219 + 1;
#X text 174 586 Cents;
#X obj 417 169 * -1;
#X text 442 105 interval start in cents, f 9;
#X connect 0 0 7 0;
#X connect 1 0 13 0;
#X connect 2 0 8 0;
#X connect 3 0 15 0;
#X connect 4 0 19 1;
#X connect 10 0 2 0;
#X connect 10 1 2 1;
#X connect 11 0 18 0;
#X connect 11 1 22 1;
#X connect 11 2 19 0;
#X connect 12 0 13 1;
#X connect 13 0 30 0;
#X connect 13 0 32 0;
#X connect 15 0 17 0;
#X connect 15 1 12 0;
#X connect 15 2 18 1;
#X connect 15 3 16 0;
#X connect 15 3 28 0;
#X connect 17 0 20 0;
#X connect 18 0 23 0;
#X connect 19 0 10 0;
#X connect 20 0 21 0;
#X connect 20 1 1 0;
#X connect 22 0 0 1;
#X connect 23 0 0 0;
#X connect 23 1 22 0;
#X connect 28 0 34 0;
#X connect 29 0 11 0;
#X connect 30 0 9 0;
#X connect 30 1 29 0;
#X connect 32 0 13 1;
#X connect 34 0 29 1;
#X restore 129 107 pd Duplicate/Curve;
#X obj 129 264 outlet;
#N canvas 397 149 458 491 set-table 1;
#X obj 90 53 inlet;
#X obj 196 253 array set Curva;
#X obj 196 286 array max Curva;
#X obj 90 286 array min Curva;
#X msg 175 381 \; Curva bounds 0 \$2 1251 \$1;
#X floatatom 154 318 5 0 0 0 - - -;
#X floatatom 196 318 5 0 0 0 - - -;
#X obj 175 343 pack;
#X obj 90 120 list store;
#X msg 90 93 append \$1 \, bang;
#X obj 90 147 list split 1251;
#X obj 252 326 loadbang;
#X msg 252 349 1 0;
#X obj 90 178 trigger bang bang list;
#X connect 0 0 9 0;
#X connect 2 0 6 0;
#X connect 3 0 5 0;
#X connect 5 0 7 0;
#X connect 6 0 7 1;
#X connect 7 0 4 0;
#X connect 8 0 10 0;
#X connect 9 0 8 0;
#X connect 10 0 13 0;
#X connect 10 1 8 1;
#X connect 11 0 12 0;
#X connect 12 0 4 0;
#X connect 13 0 3 0;
#X connect 13 1 2 0;
#X connect 13 2 1 0;
#X restore 244 204 pd set-table;
#X obj 285 119 r \$0-roughness;
#X obj 244 169 roughness;
#N canvas 433 87 373 491 scale 0;
#X obj 152 224 -;
#X obj 125 101 pack float float;
#X obj 218 58 inlet;
#X obj 125 186 t f f;
#X obj 152 271 change;
#X obj 125 127 swap;
#X obj 152 426 outlet;
#X msg 184 196 0;
#X obj 152 294 sel -1 1;
#X obj 185 175 r bangclear;
#X obj 125 55 inlet;
#X obj 152 385 list store;
#X msg 152 348 append \$1;
#X text 203 428 Scale;
#X obj 223 353 r bangclear;
#X obj 152 247 expr $f1/abs($f1);
#X obj 152 323 v cents;
#X obj 146 151 v cents;
#X obj 82 348 r \$0-done;
#X text 183 224 roughness diference;
#X text 124 34 Cents;
#X text 220 35 Roughness;
#X connect 0 0 15 0;
#X connect 1 0 5 0;
#X connect 2 0 1 1;
#X connect 3 0 0 1;
#X connect 3 1 0 0;
#X connect 4 0 8 0;
#X connect 5 0 3 0;
#X connect 5 1 17 0;
#X connect 7 0 0 1;
#X connect 8 0 16 0;
#X connect 8 1 16 0;
#X connect 9 0 7 0;
#X connect 10 0 1 0;
#X connect 11 0 6 0;
#X connect 12 0 11 0;
#X connect 14 0 11 1;
#X connect 15 0 4 0;
#X connect 16 0 12 0;
#X connect 18 0 11 0;
#X restore 129 206 pd scale;
#X text 96 130 cents;
#X connect 0 0 2 0;
#X connect 1 0 2 1;
#X connect 2 0 7 0;
#X connect 2 1 6 0;
#X connect 2 2 6 1;
#X connect 5 0 6 0;
#X connect 6 0 4 0;
#X connect 6 0 7 1;
#X connect 7 0 3 0;
#X restore 129 428 pd Curve;
#N canvas 888 23 523 381 notes 0;
#X text 70 36 phonstep (defaut is 20 \, reasonalbe is from 10 to 25)
;
#X text 88 227 Clarence's Model: curve 0 \, loudness 2 \, weight 1
;
#X text 88 244 Vassilakis Model: curve 1 \, loudness 0 \, weight 0
;
#X text 70 172 curve: 0 = Parncutt (default) \, 1 = Sethares;
#X text 70 152 weight: 0 (vassilakis/default) \, 1 (log mean used by
Clarence), f 61;
#X text 89 279 Default \, no masking;
#X text 74 61 loudness mode:;
#X text 98 81 0 - linear amplitude \; 1 - dbtorms(dB-LTh) \; 2 - dbtorms(Phon)
\; 3 - Phon \; 4 - Sones (default), f 68;
#X text 88 210 Porres' model (default): Curve 0 \, loudness 2 \, weight
0;
#X restore 296 190 pd notes;
#X text 263 76 Barlow's;
#X text 277 102 Vassilakis';
#X text 421 626 Cents;
#X text 459 627 0;
#X text 493 627 100;
#X text 534 627 200;
#X text 575 627 300;
#X text 616 627 400;
#X text 657 627 500;
#X text 698 627 600;
#X text 739 627 700;
#X text 780 627 800;
#X text 821 627 900;
#X text 859 627 1000;
#X text 900 627 1100;
#X text 941 627 1200;
#X obj 317 534 s \$0-roughness;
#X obj 77 133 s \$0-roughness;
#X msg 77 76 curve 0 \, loudness 4 \, weight 1;
#X msg 58 51 curve 0 \, loudness 4 \, weight 0;
#X text 242 50 Porres' model (default);
#N canvas 451 23 280 264 freq-amps 0;
#X obj 120 52 inlet;
#X obj 167 190 outlet;
#X obj 99 189 outlet;
#X obj 68 119 t b b;
#X obj 68 87 bng 15 250 50 0 empty \$0-Go! empty 17 7 0 10 -228856
-1 -1;
#X obj 99 155 list;
#X obj 167 154 list;
#X obj 68 52 inlet;
#N canvas 240 57 348 317 get-lists 0;
#X obj 205 86 sel 0;
#X obj 94 219 list store;
#X msg 94 183 append \$1;
#X obj 178 219 list store;
#X msg 178 183 append \$1;
#X obj 205 114 t b b b;
#X msg 95 103 \$2;
#X msg 142 103 \$3;
#X obj 142 59 trigger l f;
#X obj 142 35 inlet;
#X obj 178 250 outlet;
#X obj 94 250 outlet;
#X connect 0 0 5 0;
#X connect 1 0 11 0;
#X connect 2 0 1 0;
#X connect 3 0 10 0;
#X connect 4 0 3 0;
#X connect 5 0 1 1;
#X connect 5 0 3 1;
#X connect 5 1 1 0;
#X connect 5 2 3 0;
#X connect 6 0 2 0;
#X connect 7 0 4 0;
#X connect 8 0 7 0;
#X connect 8 0 6 0;
#X connect 8 1 0 0;
#X connect 9 0 8 0;
#X restore 120 88 pd get-lists;
#X connect 0 0 8 0;
#X connect 3 0 5 0;
#X connect 3 1 6 0;
#X connect 4 0 3 0;
#X connect 5 0 2 0;
#X connect 6 0 1 0;
#X connect 7 0 4 0;
#X connect 8 0 5 1;
#X connect 8 1 6 1;
#X restore 35 371 pd freq-amps;
#X floatatom 104 197 5 0 0 0 - - -;
#X floatatom 178 227 5 4 50 0 - - -;
#X msg 178 250 npeak \$1;
#X obj 104 220 sig~ 300;
#X obj 104 289 sigmund~ -npts 2048 -hop 1024 -npeak 10 peaks;
#X obj 35 335 bng 17 250 50 0 empty empty empty 17 7 0 10 -228856 -1
-1;
#X text 29 315 Do it;
#X obj 104 246 phasor~;
#X obj 129 537 print Scale;
#X connect 2 0 16 0;
#X connect 3 0 34 0;
#X connect 4 0 3 0;
#X connect 5 0 34 0;
#X connect 6 0 5 0;
#X connect 7 0 34 0;
#X connect 8 0 10 0;
#X connect 9 0 7 0;
#X connect 10 0 34 0;
#X connect 11 0 16 1;
#X connect 12 0 16 0;
#X connect 13 0 14 0;
#X connect 14 0 34 0;
#X connect 15 0 35 0;
#X connect 16 0 48 0;
#X connect 36 0 35 0;
#X connect 37 0 35 0;
#X connect 39 0 16 0;
#X connect 39 1 16 1;
#X connect 40 0 43 0;
#X connect 41 0 42 0;
#X connect 42 0 44 0;
#X connect 43 0 47 0;
#X connect 44 0 39 1;
#X connect 45 0 39 0;
#X connect 47 0 44 0;
#X restore 365 172 pd roughness-curve-example;
#N canvas 693 213 522 442 realtime 0;
#X obj 165 199 roughness;
#X floatatom 91 33 5 0 0 0 - - -;
#X obj 91 57 osc~ 1000;
#X obj 165 57 osc~ 1090;
#X floatatom 165 33 5 0 0 0 - - -;
#X obj 165 234 nbx 10 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 1.03211 256;
#X obj 165 100 *~ 0.5;
#X obj 165 130 sigmund~ -npts 2048 -hop 1024 -npeak 2 peaks;
#N canvas 240 57 346 334 get-lists 0;
#X obj 202 95 sel 0;
#X obj 91 228 list store;
#X msg 91 192 append \$1;
#X obj 175 228 list store;
#X msg 175 192 append \$1;
#X obj 202 123 t b b b;
#X msg 92 112 \$2;
#X msg 139 112 \$3;
#X obj 139 68 trigger l f;
#X obj 139 34 inlet;
#X obj 175 269 outlet;
#X obj 91 269 outlet;
#X connect 0 0 5 0;
#X connect 1 0 11 0;
#X connect 2 0 1 0;
#X connect 3 0 10 0;
#X connect 4 0 3 0;
#X connect 5 0 1 1;
#X connect 5 0 3 1;
#X connect 5 1 1 0;
#X connect 5 2 3 0;
#X connect 6 0 2 0;
#X connect 7 0 4 0;
#X connect 8 0 7 0;
#X connect 8 0 6 0;
#X connect 8 1 0 0;
#X connect 9 0 8 0;
#X restore 165 163 pd get-lists;
#X obj 165 273 vsl 15 128 0 1 0 0 empty empty empty 0 -9 0 10 -228856
-1 -1 12700 1;
#X text 271 63 using sigmund to estimate roughness in realtime, f
26;
#X connect 0 0 5 0;
#X connect 1 0 2 0;
#X connect 2 0 6 0;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 5 0 9 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 0 0;
#X connect 8 1 0 1;
#X restore 368 141 pd realtime;
#X obj 468 88 loadbang;
#X msg 468 121 \; pd dsp 1;
#X connect 0 0 3 0;
#X connect 1 0 3 1;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 10 0 11 0;
