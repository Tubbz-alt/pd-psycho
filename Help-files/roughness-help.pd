#N canvas 840 56 531 352 10;
#X declare -path psycho;
#X msg 113 130 500 1000 1500 2000;
#X msg 164 167 0.9 0.8 0.4 0.3;
#X msg 96 103 100 200 300 400;
#X obj 113 191 roughness;
#X text 41 38 Get the overall roughness of a spectrum \, defined by
a frequency and amplitude list, f 42;
#X text 199 102 <= freq;
#X text 266 166 <= amp;
#N canvas 693 213 522 442 realtime 0;
#X obj 165 199 roughness;
#X floatatom 91 33 5 0 0 0 - - -;
#X obj 91 57 osc~ 1000;
#X obj 165 57 osc~ 1090;
#X floatatom 165 33 5 0 0 0 - - -;
#X obj 165 234 nbx 10 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0
10 -262144 -1 -1 1.03209 256;
#X obj 165 100 *~ 0.5;
#X obj 165 130 sigmund~ -npts 2048 -hop 1024 -npeak 2 peaks;
#N canvas 240 57 346 334 get-lists 0;
#X obj 202 95 sel 0;
#X obj 91 228 list store;
#X msg 91 192 append \$1;
#X obj 175 228 list store;
#X msg 175 192 append \$1;
#X obj 202 123 t b b b;
#X msg 92 112 \$2;
#X msg 139 112 \$3;
#X obj 139 68 trigger l f;
#X obj 139 34 inlet;
#X obj 175 269 outlet;
#X obj 91 269 outlet;
#X connect 0 0 5 0;
#X connect 1 0 11 0;
#X connect 2 0 1 0;
#X connect 3 0 10 0;
#X connect 4 0 3 0;
#X connect 5 0 1 1;
#X connect 5 0 3 1;
#X connect 5 1 1 0;
#X connect 5 2 3 0;
#X connect 6 0 2 0;
#X connect 7 0 4 0;
#X connect 8 0 7 0;
#X connect 8 0 6 0;
#X connect 8 1 0 0;
#X connect 9 0 8 0;
#X restore 165 163 pd get-lists;
#X obj 165 273 vsl 15 128 0 1 0 0 empty empty empty 0 -9 0 10 -228856
-1 -1 12700 1;
#X text 271 63 using sigmund to estimate roughness in realtime, f
26;
#X obj 331 236 loadbang;
#X msg 331 269 \; pd dsp 1;
#X connect 0 0 5 0;
#X connect 1 0 2 0;
#X connect 2 0 6 0;
#X connect 3 0 6 0;
#X connect 4 0 3 0;
#X connect 5 0 9 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 8 0 0 0;
#X connect 8 1 0 1;
#X connect 11 0 12 0;
#X restore 353 196 pd realtime;
#X text 290 276 see also:;
#N canvas 571 137 635 399 vanilla 0;
#X floatatom 108 226 0 0 0 0 - - -;
#N canvas 733 434 415 309 Roughness 0;
#X text 193 50 amp-list;
#X text 71 50 freq-list;
#X obj 77 67 inlet;
#X obj 203 67 inlet;
#X obj 89 248 outlet;
#X text 207 139 Amp;
#X text 109 140 Hz;
#N canvas 355 179 536 307 Parncutt 0;
#X obj 36 22 inlet;
#X obj 60 205 expr pow((4*2.71828*$f1)/ pow(2.71828 \, 4*$f1) \, 2)
;
#X obj 60 121 -;
#X obj 60 231 outlet;
#X obj 60 143 abs;
#X text 105 225 Roughness estimation according to Plomp & Levelt (1965)
\, for equally loud pure tones in barks;
#X msg 135 183 0;
#N canvas 146 157 926 353 hztobark 0;
#X obj 62 24 inlet;
#X obj 61 137 expr 13.3*atan(3*$f1/4000);
#X obj 150 83 expr ((26.81*$f1)/(1960+$f1))-0.53;
#X obj 62 54 moses 219.501;
#X obj 150 109 expr if ($f1>20.1 \, $f1+(0.22*($f1-20.1)) \, $f1);
#X obj 114 166 outlet;
#X text 40 1 "HzToCbrz";
#X text 51 214 Clarence's Combination of Terhardt (1979) & Traunmuller
(1990) (MusiQuantics Book);
#X obj 482 30 inlet;
#X obj 481 143 expr 13.3*atan(3*$f1/4000);
#X obj 570 89 expr ((26.81*$f1)/(1960+$f1))-0.53;
#X obj 482 60 moses 219.501;
#X obj 570 115 expr if ($f1>20.1 \, $f1+(0.22*($f1-20.1)) \, $f1);
#X obj 534 172 outlet;
#X text 460 7 "HzToCbrz";
#X text 471 220 Clarence's Combination of Terhardt (1979) & Traunmuller
(1990) (MusiQuantics Book);
#X connect 0 0 3 0;
#X connect 1 0 5 0;
#X connect 2 0 4 0;
#X connect 3 0 1 0;
#X connect 3 1 2 0;
#X connect 4 0 5 0;
#X connect 8 0 11 0;
#X connect 9 0 13 0;
#X connect 10 0 12 0;
#X connect 11 0 9 0;
#X connect 11 1 10 0;
#X connect 12 0 13 0;
#X restore 36 88 pd hztobark;
#X text 100 126 Parncutt's Aproximation (1993) of Plomp & Levelt's
Curve (1965).;
#X obj 60 163 moses 10.2;
#X obj 36 57 unpack;
#X connect 0 0 10 0;
#X connect 1 0 3 0;
#X connect 2 0 4 0;
#X connect 4 0 9 0;
#X connect 6 0 3 0;
#X connect 7 0 2 0;
#X connect 7 1 2 1;
#X connect 9 0 1 0;
#X connect 9 1 6 0;
#X connect 10 0 7 0;
#X connect 10 1 7 1;
#X restore 104 160 pd Parncutt;
#N canvas 450 163 618 601 Split-in-Pairs 0;
#X text 329 22 amp-list;
#X text 174 22 freq-list;
#X obj 174 48 inlet;
#X obj 329 48 inlet;
#X obj 174 203 until;
#X obj 244 470 list store;
#X obj 174 231 f;
#X obj 207 231 + 1;
#X msg 215 203 0;
#X msg 244 357 get \$1 1;
#X obj 174 178 t f b;
#X obj 223 529 pack;
#X obj 108 357 until;
#X obj 108 470 list store;
#X obj 108 385 f;
#X obj 140 385 + 1;
#X msg 108 444 get \$1 1;
#X obj 142 327 t b b;
#X obj 169 357 f 1;
#X obj 202 357 + 1;
#X msg 184 327 1;
#X obj 301 435 r \$0-freqs;
#X obj 174 74 t l l b;
#X obj 228 74 s \$0-init;
#X obj 184 305 r \$0-init;
#X obj 193 101 s \$0-freqs;
#X obj 174 129 list length;
#X obj 439 424 list store;
#X msg 439 341 get \$1 1;
#X obj 418 483 pack;
#X obj 373 394 list store;
#X msg 373 368 get \$1 1;
#X obj 329 76 s \$0-amps;
#X obj 496 387 r \$0-amps;
#X obj 108 411 t f f;
#X obj 174 260 trigger bang float float;
#X obj 418 564 outlet;
#X obj 223 564 outlet;
#X obj 174 152 - 1;
#X connect 2 0 22 0;
#X connect 3 0 32 0;
#X connect 4 0 6 0;
#X connect 5 0 11 1;
#X connect 6 0 7 0;
#X connect 6 0 35 0;
#X connect 7 0 6 1;
#X connect 8 0 6 1;
#X connect 9 0 5 0;
#X connect 10 0 4 0;
#X connect 10 1 8 0;
#X connect 11 0 37 0;
#X connect 12 0 14 0;
#X connect 13 0 11 0;
#X connect 13 1 12 1;
#X connect 14 0 15 0;
#X connect 14 0 34 0;
#X connect 15 0 14 1;
#X connect 16 0 13 0;
#X connect 17 0 12 0;
#X connect 17 1 18 0;
#X connect 18 0 14 1;
#X connect 18 0 19 0;
#X connect 19 0 18 1;
#X connect 20 0 18 1;
#X connect 21 0 5 1;
#X connect 21 0 13 1;
#X connect 22 0 26 0;
#X connect 22 1 25 0;
#X connect 22 2 23 0;
#X connect 24 0 20 0;
#X connect 26 0 38 0;
#X connect 27 0 29 1;
#X connect 28 0 27 0;
#X connect 29 0 36 0;
#X connect 30 0 29 0;
#X connect 31 0 30 0;
#X connect 33 0 27 1;
#X connect 33 0 30 1;
#X connect 34 0 16 0;
#X connect 34 1 31 0;
#X connect 35 0 17 0;
#X connect 35 1 9 0;
#X connect 35 2 28 0;
#X connect 38 0 10 0;
#X restore 104 122 pd Split-in-Pairs;
#X obj 89 215 f;
#X obj 77 95 t b l;
#N canvas 849 553 261 216 multiply&sum 0;
#X obj 67 48 inlet;
#X obj 109 48 inlet;
#X obj 94 83 *;
#X obj 128 125 f;
#X obj 94 124 +;
#X obj 94 156 outlet;
#X msg 127 99 0;
#X obj 127 79 r \$0-init;
#X connect 0 0 2 0;
#X connect 1 0 2 1;
#X connect 2 0 4 0;
#X connect 3 0 4 1;
#X connect 4 0 3 0;
#X connect 4 0 5 0;
#X connect 6 0 4 1;
#X connect 7 0 6 0;
#X restore 104 187 pd multiply&sum;
#N canvas 441 149 483 307 Vassilakis 0;
#X obj 83 237 outlet;
#X text 212 163 Vassilakis;
#X obj 83 170 min;
#X obj 410 169 max;
#X obj 83 39 inlet;
#X obj 83 192 expr pow(($f1*$f2) \, 0.1)*pow(((2*$f1)/($f1+$f2)) \,
3.11);
#X obj 83 98 t f f;
#X obj 83 72 unpack float float;
#X connect 2 0 5 0;
#X connect 3 0 5 1;
#X connect 4 0 7 0;
#X connect 5 0 0 0;
#X connect 6 0 2 0;
#X connect 6 1 3 0;
#X connect 7 0 6 0;
#X connect 7 1 2 1;
#X connect 7 1 3 1;
#X restore 203 159 pd Vassilakis;
#X connect 2 0 10 0;
#X connect 3 0 8 1;
#X connect 7 0 11 0;
#X connect 8 0 7 0;
#X connect 8 1 12 0;
#X connect 9 0 4 0;
#X connect 10 0 9 0;
#X connect 10 1 8 0;
#X connect 11 0 9 1;
#X connect 12 0 11 1;
#X restore 108 196 pd Roughness;
#X obj 214 198 roughness;
#X floatatom 214 228 0 0 0 0 - - -;
#X msg 108 109 100 200 300 400;
#X msg 214 109 1 0.5 0.25 0.1;
#X obj 268 135 loadbang;
#X msg 268 158 curve 0 \, weight 0 \, loudness 0 \, masking 0;
#X text 133 33 Here's an example of a vanilla implementation of the
roughness calculation algorithm. Note the specific parameters used.
;
#X floatatom 377 323 0 0 0 0 - - -;
#X obj 380 220 hsl 128 15 0 1.2 0 0 empty empty empty -2 -8 0 10 -228856
-1 -1 0 1;
#X obj 377 254 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-228856 -1 -1 0 256;
#N canvas 584 96 546 181 sethares 0;
#X obj 131 46 inlet;
#X obj 131 110 outlet;
#X obj 131 75 expr 5.56309 * (exp($f1 * -3.51) - exp($f1 * -5.75))
;
#X connect 0 0 2 0;
#X connect 2 0 1 0;
#X restore 377 290 pd sethares;
#X text 452 289 <= vanilla implementation of sethares' plompt & levelt
aproximation, f 21;
#X connect 1 0 0 0;
#X connect 2 0 3 0;
#X connect 4 0 1 0;
#X connect 4 0 2 0;
#X connect 5 0 1 1;
#X connect 5 0 2 1;
#X connect 6 0 7 0;
#X connect 7 0 2 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 12 0 9 0;
#X restore 349 137 pd vanilla;
#X obj 113 226 nbx 9 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
-228856 -1 -1 0 256;
#X obj 336 47 declare -path psycho;
#N canvas 663 188 685 424 parameters 0;
#X msg 214 196 loudness \$1;
#X msg 241 282 curve \$1;
#X obj 241 262 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 232 239 weight \$1;
#X obj 251 302 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X msg 251 322 masking \$1;
#X obj 76 386 s \$0-roughness;
#X obj 214 175 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X text 333 251 loudness \; 0) linear amplitude (used by Sethares and
Vassilakis) \; 1) Sones (Used by Barlow and Porres);
#X obj 232 219 hradio 15 1 0 3 empty empty empty 0 -8 0 10 -262144
-1 -1 0;
#X text 333 294 weight \; 0) Vassilakis (Amplitude fluctuation degree)
\; 1) Barlow (quadratic mean)) \; 2) Setahres (minimum amplitude value)
;
#X text 333 165 curve \; 0) Parncutt (used by Barlow and Porres) \;
1) Sethares (used by Sethares and Vassilakis);
#X text 332 208 Masking \; 0) off (used by Sethares and Vassilakis
\; 1) on (used by Barlow and Porres);
#X msg 83 143 barlow;
#X msg 102 211 vassilakis;
#X msg 96 189 sethares;
#X msg 90 164 porres;
#X text 61 98 Set the model as proposed by these authors:, f 16;
#X text 220 125 Combine the parameters at will (for tests);
#X text 197 36 The default model is proposed by Porres as a revision
of Clarence Barlow's model. You can set the model as proposed by the
other reference authors or combine parameters at will)., f 62;
#X connect 0 0 6 0;
#X connect 1 0 6 0;
#X connect 2 0 1 0;
#X connect 3 0 6 0;
#X connect 4 0 5 0;
#X connect 5 0 6 0;
#X connect 7 0 0 0;
#X connect 9 0 3 0;
#X connect 13 0 6 0;
#X connect 14 0 6 0;
#X connect 15 0 6 0;
#X connect 16 0 6 0;
#X restore 348 107 pd parameters;
#X obj 358 276 roughcurve;
#X connect 0 0 3 0;
#X connect 1 0 3 1;
#X connect 2 0 3 0;
#X connect 3 0 10 0;
